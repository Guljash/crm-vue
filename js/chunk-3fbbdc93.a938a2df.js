(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fbbdc93"],{"58c2":function(e,t,i){"use strict";i.r(t);var n=i("7a23"),r=Object(n["g"])("div",{class:"page-title"},[Object(n["g"])("h3",null,"Категории")],-1),c={key:1,class:"row"},a={key:1,class:"center"};function l(e,t,i,l,s,u){var o=Object(n["H"])("Loader"),d=Object(n["H"])("CategoryCreate"),b=Object(n["H"])("CategoryEdit");return Object(n["z"])(),Object(n["f"])("div",null,[r,Object(n["g"])("section",null,[s.loading?(Object(n["z"])(),Object(n["d"])(o,{key:0})):(Object(n["z"])(),Object(n["f"])("div",c,[Object(n["j"])(d,{onCreated:u.addNewCategory},null,8,["onCreated"]),s.categories.length?(Object(n["z"])(),Object(n["d"])(b,{key:s.categories.length+s.updateCount,onUpdated:u.updateCategories,categories:s.categories},null,8,["onUpdated","categories"])):(Object(n["z"])(),Object(n["f"])("p",a,"Нет категорий"))]))])])}var s=i("1da1"),u=(i("c740"),i("96cf"),{class:"col s12 m6"}),o=Object(n["g"])("div",{class:"page-subtitle"},[Object(n["g"])("h4",null,"Создать")],-1),d={class:"input-field"},b=Object(n["g"])("label",{for:"name"},"Название",-1),j={key:0,class:"helper-text invalid"},m={class:"input-field"},O=Object(n["g"])("label",{for:"limit"},"Лимит",-1),f={key:0,class:"helper-text invalid"},g=Object(n["g"])("button",{class:"btn waves-effect waves-light",type:"submit"},[Object(n["i"])(" Создать "),Object(n["g"])("i",{class:"material-icons right"},"send")],-1);function p(e,t,i,r,c,a){return Object(n["z"])(),Object(n["f"])("div",u,[Object(n["g"])("div",null,[o,Object(n["g"])("form",{onSubmit:t[2]||(t[2]=Object(n["V"])((function(){return a.submitHandler&&a.submitHandler.apply(a,arguments)}),["prevent"]))},[Object(n["g"])("div",d,[Object(n["T"])(Object(n["g"])("input",{id:"name",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.title=e}),class:Object(n["s"])({invalid:r.v$.title.$error})},null,2),[[n["Q"],c.title]]),b,r.v$.title.$error?(Object(n["z"])(),Object(n["f"])("span",j,"Введите название")):Object(n["e"])("",!0)]),Object(n["g"])("div",m,[Object(n["T"])(Object(n["g"])("input",{id:"limit",type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.limit=e}),class:Object(n["s"])({invalid:r.v$.limit.$error})},null,2),[[n["Q"],c.limit]]),O,r.v$.limit.$error?(Object(n["z"])(),Object(n["f"])("span",f,"Минимальное значение "+Object(n["L"])(r.v$.limit.minValue.$params.min),1)):Object(n["e"])("",!0)]),g],32)])])}var v=i("25a0"),h=i("e3e1"),$={name:"categoryCreate",setup:function(){return{v$:Object(v["a"])()}},data:function(){return{title:"",limit:100}},validations:{title:{required:h["d"]},limit:{minValue:Object(h["c"])(100)}},mounted:function(){window.M.updateTextFields()},methods:{submitHandler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.v$.$invalid){t.next=3;break}return e.v$.$touch(),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$store.dispatch("createCategory",{title:e.title,limit:e.limit});case 6:i=t.sent,e.title="",e.limit=100,e.v$.$reset(),e.$message("Категория была создана"),e.$emit("created",i),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))()}}};$.render=p;var y=$,w={class:"col s12 m6"},x=Object(n["g"])("div",{class:"page-subtitle"},[Object(n["g"])("h4",null,"Редактировать")],-1),k={class:"input-field"},C=["value"],z=Object(n["g"])("label",null,"Выберите категорию",-1),V={class:"input-field"},H=Object(n["g"])("label",{for:"name"},"Название",-1),T={key:0,class:"helper-text invalid"},U={class:"input-field"},R=Object(n["g"])("label",{for:"limit"},"Лимит",-1),A={key:0,class:"helper-text invalid"},F=Object(n["g"])("button",{class:"btn waves-effect waves-light",type:"submit"},[Object(n["i"])(" Обновить "),Object(n["g"])("i",{class:"material-icons right"},"send")],-1);function I(e,t,i,r,c,a){return Object(n["z"])(),Object(n["f"])("div",w,[Object(n["g"])("div",null,[x,Object(n["g"])("form",{onSubmit:t[3]||(t[3]=Object(n["V"])((function(){return a.submitHandler&&a.submitHandler.apply(a,arguments)}),["prevent"]))},[Object(n["g"])("div",k,[Object(n["T"])(Object(n["g"])("select",{ref:"select","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.current=e})},[(Object(n["z"])(!0),Object(n["f"])(n["a"],null,Object(n["F"])(i.categories,(function(e){return Object(n["z"])(),Object(n["f"])("option",{key:e.id,value:e.id},Object(n["L"])(e.title),9,C)})),128))],512),[[n["P"],c.current]]),z]),Object(n["g"])("div",V,[Object(n["T"])(Object(n["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.title=e}),class:Object(n["s"])({invalid:r.v$.title.$error}),type:"text",id:"name"},null,2),[[n["Q"],c.title]]),H,r.v$.title.$error?(Object(n["z"])(),Object(n["f"])("span",T,"Введите название")):Object(n["e"])("",!0)]),Object(n["g"])("div",U,[Object(n["T"])(Object(n["g"])("input",{id:"limit",type:"number","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.limit=e}),class:Object(n["s"])({invalid:r.v$.limit.$error})},null,2),[[n["Q"],c.limit]]),R,r.v$.limit.$error?(Object(n["z"])(),Object(n["f"])("span",A,"Минимальное значение "+Object(n["L"])(r.v$.limit.minValue.$params.min),1)):Object(n["e"])("",!0)]),F],32)])])}i("7db0");var L={setup:function(){return{v$:Object(v["a"])()}},data:function(){return{select:null,title:"",limit:100,current:null}},created:function(){var e=this.categories[0],t=e.id,i=e.title,n=e.limit;this.current=t,this.title=i,this.limit=n},mounted:function(){this.select=window.M.FormSelect.init(this.$refs.select),window.M.updateTextFields()},unmounted:function(){this.select&&this.select.destroy&&this.select.destroy()},watch:{current:function(e){var t=this.categories.find((function(t){return t.id===e})),i=t.title,n=t.limit;this.title=i,this.limit=n}},props:{categories:{type:Array,requied:!0}},validations:{title:{required:h["d"]},limit:{minValue:Object(h["c"])(100)}},methods:{submitHandler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.v$.$invalid){t.next=3;break}return e.v$.$touch(),t.abrupt("return");case 3:return t.prev=3,i={id:e.current,title:e.title,limit:e.limit},t.next=7,e.$store.dispatch("updateCategory",i);case 7:e.$message("Категория успешно обновлена"),e.$emit("updated",i),t.next=15;break;case 11:throw t.prev=11,t.t0=t["catch"](3),console.log(t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()}}};L.render=I;var Q=L,q={name:"categories",data:function(){return{categories:[],loading:!0,updateCount:0}},components:{CategoryCreate:y,CategoryEdit:Q},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchCategories");case 2:e.categories=t.sent,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},methods:{addNewCategory:function(e){this.categories.push(e)},updateCategories:function(e){var t=this.categories.findIndex((function(t){return t.id===e.id}));this.categories[t].title=e.title,this.categories[t].limit=e.limit,this.updateCount++}}};q.render=l;t["default"]=q},"7db0":function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").find,c=i("44d2"),a="find",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(a)},c740:function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").findIndex,c=i("44d2"),a="findIndex",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(a)}}]);
//# sourceMappingURL=chunk-3fbbdc93.a938a2df.js.map