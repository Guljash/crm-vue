(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fe47070"],{6859:function(e,t,r){"use strict";r.r(t);var c=r("7a23"),n={class:"page-title"},o=Object(c["g"])("h3",null,"Планирование",-1),i={key:1,class:"center"},a=Object(c["i"])(" Категорий пока нет. "),u=Object(c["i"])("Добавить новую категорию"),l={key:2},s={class:"progress tooltipped","data-position":"top"};function d(e,t,r,d,b,f){var j=Object(c["H"])("Loader"),O=Object(c["H"])("router-link"),p=Object(c["I"])("tooltip");return Object(c["z"])(),Object(c["f"])("div",null,[Object(c["g"])("div",n,[o,Object(c["g"])("h4",null,Object(c["L"])(f.currencyFilter(e.info.bill)),1)]),b.loading?(Object(c["z"])(),Object(c["d"])(j,{key:0})):b.categories.length?(Object(c["z"])(),Object(c["f"])("section",l,[(Object(c["z"])(!0),Object(c["f"])(c["a"],null,Object(c["F"])(b.categories,(function(e){return Object(c["z"])(),Object(c["f"])("div",{key:e.id},[Object(c["g"])("p",null,[Object(c["g"])("strong",null,Object(c["L"])(e.title),1),Object(c["i"])(" "+Object(c["L"])(f.currencyFilter(e.spend))+" из "+Object(c["L"])(f.currencyFilter(e.limit)),1)]),Object(c["T"])(Object(c["g"])("div",s,[Object(c["g"])("div",{class:Object(c["s"])(["determinate",[e.progressColor]]),style:Object(c["t"])({width:e.progressPercent+"%"})},null,6)],512),[[p,e.tooltip]])])})),128))])):(Object(c["z"])(),Object(c["f"])("p",i,[a,Object(c["j"])(O,{to:"/categories"},{default:Object(c["S"])((function(){return[u]})),_:1})]))])}var b=r("5530"),f=r("1da1"),j=(r("96cf"),r("d81d"),r("4de4"),r("99af"),r("d437")),O=r("5502"),p={components:{Loader:j["a"]},name:"planning",data:function(){return{loading:!0,categories:[]}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchRecords");case 2:return r=t.sent,t.next=5,e.$store.dispatch("fetchCategories");case 5:c=t.sent,e.categories=c.map((function(t){var c=r.filter((function(e){return e.categoryId===t.id})).filter((function(e){return"outcome"===e.type})).reduce((function(e,t){return e+ +t.amount}),0),n=100*c/t.limit,o=n>100?100:n,i=n<60?"green":n<100?"yellow":"red",a=t.limit-c,u="".concat(a<0?"Превышение на":"Осталось"," ").concat(e.currencyFilter(Math.abs(a)));return Object(b["a"])(Object(b["a"])({},t),{},{progressPercent:o,progressColor:i,tooltip:u,spend:c})})),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},computed:Object(b["a"])({},Object(O["c"])(["info"])),methods:{currencyFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUB";return new Intl.NumberFormat("ru-RU",{style:"currency",currency:t}).format(e)}}};p.render=d;t["default"]=p},"99af":function(e,t,r){"use strict";var c=r("23e7"),n=r("d039"),o=r("e8b5"),i=r("861d"),a=r("7b0b"),u=r("50c4"),l=r("8418"),s=r("65f0"),d=r("1dde"),b=r("b622"),f=r("2d00"),j=b("isConcatSpreadable"),O=9007199254740991,p="Maximum allowed index exceeded",g=f>=51||!n((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),h=d("concat"),m=function(e){if(!i(e))return!1;var t=e[j];return void 0!==t?!!t:o(e)},v=!g||!h;c({target:"Array",proto:!0,forced:v},{concat:function(e){var t,r,c,n,o,i=a(this),d=s(i,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?i:arguments[t],m(o)){if(n=u(o.length),b+n>O)throw TypeError(p);for(r=0;r<n;r++,b++)r in o&&l(d,b,o[r])}else{if(b>=O)throw TypeError(p);l(d,b++,o)}return d.length=b,d}})}}]);
//# sourceMappingURL=chunk-0fe47070.c34d23c7.js.map