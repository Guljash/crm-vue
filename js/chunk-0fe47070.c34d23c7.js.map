{"version":3,"sources":["webpack:///./src/views/Planning.vue","webpack:///./src/views/Planning.vue?741e","webpack:///./node_modules/core-js/modules/es.array.concat.js"],"names":["class","data-position","currencyFilter","info","bill","loading","categories","length","cat","key","id","title","spend","limit","progressColor","style","progressPercent","tooltip","to","components","Loader","name","data","mounted","$store","dispatch","records","map","filter","r","categoryId","type","reduce","total","record","amount","percent","tooltipValue","Math","abs","computed","methods","value","currency","Intl","NumberFormat","format","render","$","fails","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","i","k","len","E","this","A","n","arguments","TypeError"],"mappings":"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","file":"js/chunk-0fe47070.c34d23c7.js","sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>Планирование</h3>\n      <h4>{{ currencyFilter(info.bill) }}</h4>\n    </div>\n\n    <Loader v-if=\"loading\" />\n\n    <p v-else-if=\"!categories.length\" class=\"center\">\n      Категорий пока нет.\n      <router-link to=\"/categories\">Добавить новую категорию</router-link>\n    </p>\n\n    <section v-else>\n      <div v-for=\"cat of categories\" :key=\"cat.id\">\n        <p>\n          <strong>{{ cat.title }}</strong>\n          {{ currencyFilter(cat.spend) }} из {{ currencyFilter(cat.limit) }}\n        </p>\n        <div class=\"progress tooltipped\" data-position=\"top\" v-tooltip=\"cat.tooltip\">\n          <div\n            class=\"determinate\"\n            :class=\"[cat.progressColor]\"\n            :style=\"{ width: cat.progressPercent + '%' }\"\n          ></div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n\n<script>\nimport Loader from \"../components/app/Loader.vue\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  components: { Loader },\n  name: \"planning\",\n  data() {\n    return {\n      loading: true,\n      categories: [],\n    };\n  },\n  async mounted() {\n    const records = await this.$store.dispatch(\"fetchRecords\");\n    const categories = await this.$store.dispatch(\"fetchCategories\");\n\n    this.categories = categories.map((cat) => {\n      const spend = records\n        .filter((r) => r.categoryId === cat.id)\n        .filter((r) => r.type === \"outcome\")\n        .reduce((total, record) => {\n          return (total += +record.amount);\n        }, 0);\n      const percent = (100 * spend) / cat.limit;\n      const progressPercent = percent > 100 ? 100 : percent;\n      const progressColor =\n        percent < 60 ? \"green\" : percent < 100 ? \"yellow\" : \"red\";\n\n      const tooltipValue = cat.limit - spend\n      const tooltip = `${tooltipValue < 0 ? 'Превышение на' : 'Осталось'} ${this.currencyFilter(Math.abs(tooltipValue))}`\n      return {\n        ...cat,\n        progressPercent,\n        progressColor,\n        tooltip,\n        spend,\n      };\n    });\n\n    this.loading = false;\n  },\n  computed: {\n    ...mapGetters([\"info\"]),\n  },\n  methods: {\n    currencyFilter(value, currency = \"RUB\") {\n      return new Intl.NumberFormat(\"ru-RU\", {\n        style: \"currency\",\n        currency,\n      }).format(value);\n    },\n  },\n};\n</script>","import { render } from \"./Planning.vue?vue&type=template&id=8c30f03c\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n"],"sourceRoot":""}